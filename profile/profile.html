<html>
    <head>
        <link type="text/css" rel="stylesheet" href="../css/bootstrap/css/bootstrap.min.css"/>
        <link type="text/css" rel="stylesheet" href="../css/profile_stylesheet.css"/>
        <title>Humans vs Zombies - Utulsa</title>
        <script type="text/javascript" src='https://cdn.firebase.com/js/client/1.0.11/firebase.js'></script>
        <script type="text/javascript" src='https://cdn.firebase.com/js/simple-login/1.3.2/firebase-simple-login.js'></script>
        <script type="text/javascript">
            var firebaseRef = new Firebase("https://hvz-utulsa.firebaseio.com");
            var auth = new FirebaseSimpleLogin(firebaseRef, function(error, user) {
                if (error) {
                    // an error occurred when the user attempted to login
                    if (typeof(localStorage) != undefined) {
                        localStorage.id = "undefined";
                    }
                }
            });

            function emailActive() {
                document.getElementById("profileTab").className = "hide";
                document.getElementById("profileElement").className = "";
                document.getElementById("passwordTab").className = "hide";
                document.getElementById("passwordElement").className = "";
                document.getElementById("emailTab").className = "";
                document.getElementById("emailElement").className = "active";
            }
            
            function logout() {
                if (typeof(localStorage) != undefined) {
                    localStorage.id = "undefined";
                }
                auth.logout();
                redirect();
            }

            function passwordActive() {
                document.getElementById("profileTab").className = "hide";
                document.getElementById("profileElement").className = "";
                document.getElementById("emailTab").className = "hide";
                document.getElementById("emailElement").className = "";
                document.getElementById("passwordTab").className = "";
                document.getElementById("passwordElement").className = "active";
            }

            function profileActive() {
                document.getElementById("emailTab").className = "hide";
                document.getElementById("emailElement").className = "";
                document.getElementById("passwordTab").className = "hide";
                document.getElementById("passwordElement").className = "";
                document.getElementById("profileTab").className = "";
                document.getElementById("profileElement").className = "active";
            }
            
            function redirect() {
                window.location = "../home/home.html";
            }
        </script>
    </head>
    
    <body>
        <div id="mainPanel" class="panel panel-default">
            <div class="text-center">
				<h1>Profile</h1>
			</div>
            <div id="playerPanel" class="panel-body">
                <div id="picturePanel" class="panel-body">
                    <form role="form">
                        <div class="form-group">
                            <a href="#"><img id="profilePicture"/></a>
                        </div>
                        <div class="form-group">
                            <input id="displayName" type="text" class="form-control">
                        </div>
                        <div class="form-group text-center">
                            <button type="button" class="btn btn-primary" onclick="logout()">Logout</button>
                        </div>
                    </form>
                </div>
                <div id="infoPanel" class="panel-body">
                    <ul class="nav nav-tabs tabs">
                        <li class="active"><a onclick="">Status</a></li>
                        <li><a onclick="">Stats</a></li>
                    </ul>
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label for="currentStatus" class="col-md-4 control-label">Status</label>
                            <div class="col-md-8">
                                <input id="currentStatus" type="text" class="form-control" placeholder="Not playing" disabled>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="currentBiteTag" class="col-md-4 control-label">Bite Tag</label>
                            <div class="col-md-8">
                                <input id="currentBiteTag" type="text" class="form-control" placeholder="None" disabled>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div id="profilePanel" class="panel-body">
                <div class="panel-body">
                    <ul class="nav nav-tabs tabs">
                        <li id="profileElement" class="active"><a onclick="profileActive()">Profile</a></li>
                        <li id="emailElement"><a onclick="emailActive()">Email</a></li>
                        <li id="passwordElement"><a onclick="passwordActive()">Password</a></li>
                    </ul>
                    <div id="profileTab">
                        <form role="form">
                            <form class="form-inline" role="form">
                                <div id="firstNameDiv" class="form-group col-md-5">
                                    <input id="firstName" type="text" class="form-control">
                                </div>
                                <div class="form-group col-md-2">
                                    <input id="mi" type="text" class="form-control">
                                </div>
                                <div id="lastNameDiv" class="form-group col-md-5">
                                    <input id="lastName" type="text" class="form-control">
                                </div>
                            </form>
                            <div id="phoneNumberDiv" class="form-group col-md-12">
                                <input id="phoneNumber" type="text" class="form-control bfh-phone">
                            </div>
                        </form>
                    </div>
                    <div id="emailTab" class="hide">
                        <form role="form">
                            <div id="inputEmailDiv" class="form-group col-md-12">
                                <input id="inputEmail" type="email" class="form-control">
                            </div>
                            <div id="confirmEmailDiv" class="form-group col-md-12">
                                <input id="confirmEmail" type="email" class="form-control" placeholder="Confirm Email Address to Change">
                            </div>
                        </form>
                    </div>
                    <div id="passwordTab" class="hide">
                        <form role="form">
                            <div id="oldPasswordDiv" class="form-group col-md-12">
                                <input id="oldPassword" type="password" class="form-control" placeholder="Current Password">
                            </div>
                            <div id="newPasswordDiv" class="form-group col-md-12">
                                <input id="newPasswordDiv" type="password" class="form-control" placeholder="New Password">
                            </div>
                            <div id="confirmPasswordDiv" class="form-group col-md-12">
                                <input id="confirmPassword" type="password" class="form-control" placeholder="Confirm New Password">
                            </div>
                        </form>
                    </div>
                    <div class="col-md-4">
                        <button type="button" class="btn btn-primary" onclick="redirect()">Home</button>
                    </div>
                    <div class="col-md-4 text-center">
                        <button type="button" class="btn btn-primary" onclick="">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            if (typeof(localStorage) != undefined) {
                userId = localStorage.id;
                var userRef = new Firebase("https://hvz-utulsa.firebaseio.com/users/" + userId);
                userRef.on('value', function(state) {
                    document.getElementById("profilePicture").src = state.val() != "" ? state.val().picture : "../img/defalt_profile";
                    document.getElementById("displayName").placeholder = state.val() != "" ? state.val().displayName : "Display Name";
                    document.getElementById("firstName").placeholder = state.val() != "" ? state.val().name.first : "First Name";
                    document.getElementById("mi").placeholder = state.val() != "" ? state.val().name.middle : "MI";
                    document.getElementById("lastName").placeholder = state.val() != "" ? state.val().name.last : "Last Name";
                    document.getElementById("phoneNumber").placeholder = state.val() != "" ? state.val().phone : "Phone Number";
                    document.getElementById("inputEmail").placeholder = state.val() != "" ? state.val().email : "Email Address";
                });
            }
        </script>
    </body>
</html>